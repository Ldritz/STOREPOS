const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/ChartComponents-CqAIHMFS.js","js/index-essUH042.js","js/vendor-CWc6w16D.js","js/charts-BYcMWlQw.js","js/Card-CaaA6Rhh.js"])))=>i.map(i=>d[i]);
import{T as y,j as e,a as b,b as v,W as M,P as _,_ as H}from"./index-essUH042.js";import{r as x}from"./charts-BYcMWlQw.js";import{C as w}from"./Card-CaaA6Rhh.js";import"./vendor-CWc6w16D.js";const E=x.lazy(()=>H(()=>import("./ChartComponents-CqAIHMFS.js"),__vite__mapDeps([0,1,2,3,4]))),C=()=>e.jsx("div",{className:"w-full h-72 md:h-80 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading chart..."})]})}),R=({data:t})=>e.jsx("div",{className:"w-full h-72 md:h-80",children:e.jsx(x.Suspense,{fallback:e.jsx(C,{}),children:e.jsx(E.IncomeExpenseChart,{data:t})})}),I=({title:t,amount:o,Icon:a,iconClass:n})=>e.jsxs("div",{className:"bg-card border border-border p-4 rounded-lg flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:t}),e.jsx("p",{className:"text-2xl lg:text-3xl font-bold text-foreground mt-1",children:o.toLocaleString("en-PH",{style:"currency",currency:"PHP"})})]}),e.jsx("div",{className:`p-3 rounded-md ${n}`,children:e.jsx(a,{className:"w-8 h-8"})})]}),W=({inventory:t,onNavigate:o})=>{const a=t.filter(n=>n.stock<=5);return e.jsx(w,{title:"Low Stock Alerts",actions:e.jsx("button",{onClick:()=>o(_.Inventory),className:"text-sm text-primary font-semibold hover:underline",children:"Manage â†’"}),children:a.length>0?e.jsx("div",{className:"h-72 overflow-y-auto pr-2",children:e.jsx("ul",{className:"space-y-2",children:a.slice(0,5).map(n=>e.jsxs("li",{className:"flex justify-between items-center text-sm p-3 bg-secondary rounded-md",children:[e.jsx("span",{className:"text-secondary-foreground",children:n.name}),e.jsxs("span",{className:"font-bold text-destructive",children:[n.stock," ",n.unit," left"]})]},n.id))})}):e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx("p",{className:"font-semibold",children:"No low stock items."}),e.jsx("p",{className:"text-sm",children:"Well done!"})]})})},X=({data:t})=>e.jsx("div",{className:"w-full h-72 md:h-80",children:e.jsx(x.Suspense,{fallback:e.jsx(C,{}),children:e.jsx(E.TopProductsChart,{data:t})})}),f=({title:t,amount:o,Icon:a,iconClass:n})=>e.jsxs("div",{className:"bg-card border border-border p-4 rounded-lg flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium uppercase",children:t}),e.jsx("p",{className:"text-2xl font-bold text-foreground mt-1",children:o.toLocaleString("en-PH",{style:"currency",currency:"PHP"})})]}),e.jsx("div",{className:`p-3 rounded-md ${n}`,children:e.jsx(a,{className:"w-6 h-6"})})]}),V=({transactions:t,inventory:o,onNavigate:a})=>{const{todaysIncome:n,todaysExpenses:P,totalIncome:S,totalExpenses:T,netIncome:D,chartData:p,topProductsData:L}=x.useMemo(()=>{const O=new Date().toISOString().split("T")[0];let j=0,g=0,u=0,h=0;const r={},l={};t.forEach(s=>{const c=s.date.startsWith(O);s.type===y.Income?(u+=s.amount,c&&(j+=s.amount),s.items&&s.items.forEach(N=>{const d=o.find(m=>m.id===N.inventoryItemId);if(d){const m=d.price*N.quantity;l[d.id]?l[d.id].revenue+=m:l[d.id]={name:d.name,revenue:m}}})):(h+=s.amount,c&&(g+=s.amount));const i=new Date(s.date).toLocaleString("default",{month:"short",year:"numeric"});r[i]||(r[i]={income:0,expense:0}),s.type===y.Income?r[i].income+=s.amount:r[i].expense+=s.amount});const k=Object.keys(r).sort((s,c)=>new Date(s).getTime()-new Date(c).getTime()).slice(-6).map(s=>({name:new Date(s).toLocaleString("default",{month:"short"}),...r[s]})),A=Object.values(l).sort((s,c)=>c.revenue-s.revenue).slice(0,5).reverse();return{todaysIncome:j,todaysExpenses:g,totalIncome:u,totalExpenses:h,netIncome:u-h,chartData:k,topProductsData:A}},[t,o]);return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(I,{title:"TODAY'S INCOME",amount:n,Icon:b,iconClass:"bg-success text-success-foreground"}),e.jsx(I,{title:"TODAY'S EXPENSES",amount:P,Icon:v,iconClass:"bg-warning text-warning-foreground"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start",children:[e.jsx(W,{inventory:o,onNavigate:a}),e.jsx(X,{data:L})]}),e.jsx(w,{title:"Monthly Performance",children:p.length>0?e.jsx(R,{data:p}):e.jsxs("div",{className:"h-full flex flex-col justify-center items-center text-center py-10 text-muted-foreground",children:[e.jsx("p",{className:"font-semibold",children:"No transaction data for chart."}),e.jsx("p",{className:"text-sm",children:"Add some transactions to get started!"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(f,{title:"TOTAL INCOME",amount:S,Icon:b,iconClass:"bg-success text-success-foreground"}),e.jsx(f,{title:"TOTAL EXPENSES",amount:T,Icon:v,iconClass:"bg-warning text-warning-foreground"}),e.jsx(f,{title:"NET INCOME",amount:D,Icon:M,iconClass:"bg-info text-info-foreground"})]})]})};export{V as default};
