import{T as I,j as e,a as c,b as S,W as O,P as R,c as $}from"./index-B4bSIu3O.js";import{R as m,r as T,a as W,B as Y,C as B,X as H,Y as X,T as K,L as z,b as E}from"./charts-BYcMWlQw.js";import{C as v}from"./Card-CaqC1I2l.js";import"./vendor-CWc6w16D.js";const q=m.memo(({data:a})=>{const o=t=>`₱${t.toLocaleString()}`;return e.jsx("div",{className:"w-full h-72 md:h-80",children:e.jsx(W,{children:e.jsxs(Y,{data:a,margin:{top:20,right:20,left:0,bottom:5},children:[e.jsx(B,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",opacity:.3}),e.jsx(H,{dataKey:"name",stroke:"hsl(var(--muted-foreground))",fontSize:12}),e.jsx(X,{stroke:"hsl(var(--muted-foreground))",fontSize:12,tickFormatter:o}),e.jsx(K,{cursor:{fill:"hsl(var(--accent))"},contentStyle:{backgroundColor:"hsl(var(--popover))",borderColor:"hsl(var(--border))",borderRadius:"0.75rem",color:"hsl(var(--popover-foreground))",boxShadow:"0 10px 40px -10px rgba(0, 0, 0, 0.15)"},labelStyle:{fontWeight:"bold"}}),e.jsx(z,{wrapperStyle:{color:"hsl(var(--foreground))"}}),e.jsx(E,{dataKey:"income",fill:"hsl(var(--success))",name:"Income",radius:[4,4,0,0]}),e.jsx(E,{dataKey:"expense",fill:"hsl(var(--warning))",name:"Expense",radius:[4,4,0,0]})]})})})}),C=m.memo(({title:a,amount:o,Icon:t,iconClass:r,trend:n,trendLabel:f})=>e.jsx("div",{className:"card-modern group hover:shadow-strong transition-all duration-300",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium uppercase tracking-wider",children:a}),e.jsx("p",{className:"text-2xl lg:text-3xl font-bold text-foreground mt-2",children:o.toLocaleString("en-PH",{style:"currency",currency:"PHP"})}),n!==void 0&&e.jsxs("div",{className:`flex items-center gap-1 mt-2 text-sm ${n>0?"text-success":n<0?"text-destructive":"text-muted-foreground"}`,children:[e.jsx(c,{className:`w-4 h-4 ${n<0?"rotate-180":""}`}),e.jsxs("span",{className:"font-medium",children:[Math.abs(n),"%"]}),e.jsx("span",{className:"text-muted-foreground",children:f})]})]}),e.jsx("div",{className:`p-3 rounded-xl ${r} group-hover:scale-110 transition-transform duration-300`,children:e.jsx(t,{className:"w-8 h-8"})})]})})),F=m.memo(({inventory:a,onNavigate:o})=>{const t=T.useMemo(()=>a.filter(r=>r.stock<=5),[a]);return e.jsx(v,{title:"Low Stock Alerts",subtitle:`${t.length} items need attention`,icon:e.jsx($,{className:"w-5 h-5"}),actions:e.jsx("button",{onClick:()=>o(R.Inventory),className:"text-sm text-primary font-semibold hover:underline transition-colors",children:"Manage →"}),children:t.length>0?e.jsx("div",{className:"h-72 overflow-y-auto pr-2 space-y-2",children:t.slice(0,5).map(r=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-destructive/10 rounded-lg border border-destructive/20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-destructive rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:r.name})]}),e.jsxs("span",{className:"font-bold text-destructive text-sm",children:[r.stock," ",r.unit," left"]})]},r.id))}):e.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-success/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(c,{className:"w-8 h-8 text-success"})}),e.jsx("p",{className:"font-semibold text-foreground",children:"No low stock items"}),e.jsx("p",{className:"text-sm",children:"Well done! All items are well stocked."})]})})}),G=m.memo(({data:a})=>{const o=t=>`₱${t.toLocaleString()}`;return e.jsx(v,{title:"Top Products by Revenue",subtitle:"Best performing products this month",icon:e.jsx(c,{className:"w-5 h-5"}),children:a.length>0?e.jsx("div",{className:"space-y-3",children:a.map((t,r)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-secondary/30 rounded-lg hover:bg-secondary/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-primary to-primary/80 text-primary-foreground text-sm font-bold flex items-center justify-center",children:r+1}),e.jsx("span",{className:"font-medium text-foreground",children:t.name})]}),e.jsx("span",{className:"font-bold text-success font-mono",children:o(t.revenue)})]},t.name))}):e.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(c,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("p",{className:"font-semibold text-foreground",children:"No product data available"}),e.jsx("p",{className:"text-sm",children:"Add some sales to see top products!"})]})})}),j=m.memo(({title:a,amount:o,Icon:t,iconClass:r,trend:n})=>e.jsx("div",{className:"card-modern hover:shadow-medium transition-all duration-300",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${r}`,children:e.jsx(t,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium uppercase tracking-wider",children:a}),e.jsx("p",{className:"text-xl font-bold text-foreground",children:o.toLocaleString("en-PH",{style:"currency",currency:"PHP"})}),n!==void 0&&e.jsxs("p",{className:`text-xs mt-1 ${n>0?"text-success":"text-destructive"}`,children:[n>0?"+":"",n,"% from last month"]})]})]})})),_=m.memo(({transactions:a,inventory:o,onNavigate:t})=>{const{todaysIncome:r,todaysExpenses:n,totalIncome:f,totalExpenses:k,netIncome:P,chartData:N,topProductsData:D}=T.useMemo(()=>{const L=new Date().toISOString().split("T")[0];let y=0,b=0,p=0,g=0;const l={},x={};a.forEach(s=>{const i=s.date.startsWith(L);s.type===I.Income?(p+=s.amount,i&&(y+=s.amount),s.items&&s.items.forEach(w=>{const d=o.find(h=>h.id===w.inventoryItemId);if(d){const h=d.price*w.quantity;x[d.id]?x[d.id].revenue+=h:x[d.id]={name:d.name,revenue:h}}})):(g+=s.amount,i&&(b+=s.amount));const u=new Date(s.date).toLocaleString("default",{month:"short",year:"numeric"});l[u]||(l[u]={income:0,expense:0}),s.type===I.Income?l[u].income+=s.amount:l[u].expense+=s.amount});const A=Object.keys(l).sort((s,i)=>new Date(s).getTime()-new Date(i).getTime()).slice(-6).map(s=>({name:new Date(s).toLocaleString("default",{month:"short"}),...l[s]})),M=Object.values(x).sort((s,i)=>i.revenue-s.revenue).slice(0,5).reverse();return{todaysIncome:y,todaysExpenses:b,totalIncome:p,totalExpenses:g,netIncome:p-g,chartData:A,topProductsData:M}},[a,o]);return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(C,{title:"TODAY'S INCOME",amount:r,Icon:c,iconClass:"bg-success/20 text-success",trend:12,trendLabel:"vs yesterday"}),e.jsx(C,{title:"TODAY'S EXPENSES",amount:n,Icon:S,iconClass:"bg-warning/20 text-warning",trend:-5,trendLabel:"vs yesterday"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start",children:[e.jsx(F,{inventory:o,onNavigate:t}),e.jsx(G,{data:D})]}),e.jsx(v,{title:"Monthly Performance",subtitle:"Income vs Expenses over time",icon:e.jsx(c,{className:"w-5 h-5"}),children:N.length>0?e.jsx(q,{data:N}):e.jsxs("div",{className:"h-full flex flex-col justify-center items-center text-center py-10 text-muted-foreground",children:[e.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mb-4",children:e.jsx(c,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("p",{className:"font-semibold text-foreground",children:"No transaction data for chart"}),e.jsx("p",{className:"text-sm",children:"Add some transactions to get started!"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(j,{title:"TOTAL INCOME",amount:f,Icon:c,iconClass:"bg-success/20 text-success",trend:8}),e.jsx(j,{title:"TOTAL EXPENSES",amount:k,Icon:S,iconClass:"bg-warning/20 text-warning",trend:-3}),e.jsx(j,{title:"NET INCOME",amount:P,Icon:O,iconClass:"bg-info/20 text-info",trend:15})]})]})});export{_ as default};
