import{T as a,j as e,a as j,b as N,d as y,e as S,L as T,W as k}from"./index-B4bSIu3O.js";import{R as u,r as x}from"./charts-BYcMWlQw.js";import{C as H}from"./Card-CaqC1I2l.js";import"./vendor-CWc6w16D.js";const b=u.memo(({title:c,amount:m,Icon:d,iconClass:n,trend:l})=>e.jsx("div",{className:"card-modern group hover:shadow-medium transition-all duration-300",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${n} group-hover:scale-110 transition-transform duration-300`,children:e.jsx(d,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium uppercase tracking-wider",children:c}),e.jsx("p",{className:"text-2xl font-bold text-foreground mt-1",children:m.toLocaleString("en-PH",{style:"currency",currency:"PHP"})}),l!==void 0&&e.jsxs("p",{className:`text-xs mt-1 ${l>0?"text-success":"text-destructive"}`,children:[l>0?"+":"",l,"% from last month"]})]})]})})),v=u.memo(({title:c,subtitle:m,amount:d,Icon:n,iconClass:l})=>e.jsx("div",{className:"card-modern hover:shadow-medium transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${l}`,children:e.jsx(n,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:c}),e.jsx("p",{className:"text-sm text-muted-foreground",children:m})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-2xl font-bold text-foreground",children:d.toLocaleString("en-PH",{style:"currency",currency:"PHP"})})})]})})),C=u.memo(({transactions:c,onDeleteTransaction:m})=>{const d=n=>new Date(n).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border/50",children:[e.jsx("th",{className:"text-left p-4 font-semibold text-muted-foreground uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"text-left p-4 font-semibold text-muted-foreground uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"text-left p-4 font-semibold text-muted-foreground uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"text-right p-4 font-semibold text-muted-foreground uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"text-center p-4 font-semibold text-muted-foreground uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-border/50",children:c.map(n=>e.jsxs("tr",{className:"hover:bg-secondary/30 transition-colors",children:[e.jsx("td",{className:"p-4 text-sm text-muted-foreground font-mono",children:d(n.date)}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n.type===a.Income?"bg-success/20 text-success":"bg-warning/20 text-warning"}`,children:n.type===a.Income?"Income":"Expense"})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:n.description}),n.items&&n.items.length>0&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[n.items.length," item",n.items.length>1?"s":""]})]})}),e.jsx("td",{className:"p-4 text-right",children:e.jsxs("span",{className:`font-bold ${n.type===a.Income?"text-success":"text-warning"}`,children:[n.type===a.Income?"+":"-",n.amount.toLocaleString("en-PH",{style:"currency",currency:"PHP"})]})}),e.jsx("td",{className:"p-4 text-center",children:e.jsx("button",{onClick:()=>m(n),className:"p-2 text-destructive hover:bg-destructive/10 rounded-lg transition-colors focus-ring",title:"Delete transaction",children:e.jsx(y,{className:"w-4 h-4"})})})]},n.id))})]})})}),O=u.memo(({transactions:c,inventory:m,onDeleteTransaction:d})=>{const[n,l]=x.useState("cashbook"),[f,w]=x.useState(new Set),{incomeStats:g,expenseStats:h}=x.useMemo(()=>{const o=c.filter(i=>i.type===a.Income),s=c.filter(i=>i.type===a.Expense),t=o.reduce((i,p)=>i+p.amount,0),r=s.reduce((i,p)=>i+p.amount,0);return{incomeStats:{total:t,count:o.length,average:o.length>0?t/o.length:0},expenseStats:{total:r,count:s.length,average:s.length>0?r/s.length:0}}},[c]);x.useMemo(()=>{const o=c.reduce((s,t)=>{const r=t.date.split("T")[0];return s[r]||(s[r]=[]),s[r].push(t),s},{});return Object.entries(o).sort(([s],[t])=>new Date(t).getTime()-new Date(s).getTime()).map(([s,t])=>({date:s,transactions:t.sort((r,i)=>new Date(i.date).getTime()-new Date(r.date).getTime()),totalIncome:t.filter(r=>r.type===a.Income).reduce((r,i)=>r+i.amount,0),totalExpense:t.filter(r=>r.type===a.Expense).reduce((r,i)=>r+i.amount,0)}))},[c]);const D=x.useMemo(()=>{const o=c.reduce((s,t)=>{const r=t.date.split("T")[0];return s[r]||(s[r]=[]),s[r].push(t),s},{});return Object.entries(o).sort(([s],[t])=>new Date(t).getTime()-new Date(s).getTime()).map(([s,t])=>({date:s,transactions:t.sort((r,i)=>new Date(i.date).getTime()-new Date(r.date).getTime())}))},[c]),I=o=>{const s=new Set(f);s.has(o)?s.delete(o):s.add(o),w(s)},P=o=>{const s=new Date(o),t=new Date,r=new Date(t);return r.setDate(r.getDate()-1),s.toDateString()===t.toDateString()?"Today":s.toDateString()===r.toDateString()?"Yesterday":s.toLocaleDateString("en-PH",{weekday:"long",year:"numeric",month:"long",day:"numeric"})};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(b,{title:"Total Income",amount:g.total,Icon:j,iconClass:"bg-success/20 text-success",trend:12}),e.jsx(b,{title:"Total Expenses",amount:h.total,Icon:N,iconClass:"bg-warning/20 text-warning",trend:-5})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(v,{title:"Income Overview",subtitle:`${g.count} transactions`,amount:g.average,Icon:j,iconClass:"bg-success/20 text-success"}),e.jsx(v,{title:"Expense Overview",subtitle:`${h.count} transactions`,amount:h.average,Icon:N,iconClass:"bg-warning/20 text-warning"})]}),e.jsx(H,{title:"Transaction History",subtitle:`${c.length} total transactions`,icon:e.jsx(k,{className:"w-5 h-5"}),actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>l("cashbook"),className:`p-2 rounded-lg transition-colors focus-ring ${n==="cashbook"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-secondary"}`,title:"Cashbook view",children:e.jsx(S,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>l("list"),className:`p-2 rounded-lg transition-colors focus-ring ${n==="list"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-secondary"}`,title:"List view",children:e.jsx(T,{className:"w-5 h-5"})})]}),children:n==="cashbook"?e.jsx(C,{transactions:c,onDeleteTransaction:d}):e.jsx("div",{className:"space-y-4",children:D.map(({date:o,transactions:s})=>e.jsxs("div",{className:"border border-border/50 rounded-xl overflow-hidden",children:[e.jsx("button",{onClick:()=>I(o),className:"w-full p-4 text-left hover:bg-secondary/30 transition-colors focus-ring",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:P(o)}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.length," transaction",s.length>1?"s":""]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:s.filter(t=>t.type===a.Income).reduce((t,r)=>t+r.amount,0).toLocaleString("en-PH",{style:"currency",currency:"PHP"})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Income"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:s.filter(t=>t.type===a.Expense).reduce((t,r)=>t+r.amount,0).toLocaleString("en-PH",{style:"currency",currency:"PHP"})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Expense"})]})]})]})}),f.has(o)&&e.jsx("div",{className:"border-t border-border/50 bg-secondary/20",children:s.map(t=>e.jsx("div",{className:"p-4 border-b border-border/50 last:border-b-0 hover:bg-secondary/30 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${t.type===a.Income?"bg-success/20 text-success":"bg-warning/20 text-warning"}`,children:t.type===a.Income?"Income":"Expense"}),e.jsx("p",{className:"font-medium text-foreground",children:t.description})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:new Date(t.date).toLocaleTimeString("en-PH",{hour:"2-digit",minute:"2-digit"})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:`font-bold ${t.type===a.Income?"text-success":"text-warning"}`,children:[t.type===a.Income?"+":"-",t.amount.toLocaleString("en-PH",{style:"currency",currency:"PHP"})]}),e.jsx("button",{onClick:()=>d(t),className:"p-2 text-destructive hover:bg-destructive/10 rounded-lg transition-colors focus-ring",title:"Delete transaction",children:e.jsx(y,{className:"w-4 h-4"})})]})]})},t.id))})]},o))})})]})});export{O as default};
