import{j as e,e as R,S as $,E as G,d as z,f as E}from"./index-FjrJvk9f.js";import{R as L,r as a}from"./charts-BYcMWlQw.js";import"./vendor-CWc6w16D.js";const K=L.memo(({isOpen:s,onClose:i,onSave:j,itemToEdit:o,profitMarginDivisor:u})=>{const[m,y]=a.useState(""),[C,p]=a.useState(""),[F,x]=a.useState(""),[h,f]=a.useState("pcs"),[k,b]=a.useState("Feeds"),[P,S]=a.useState(""),[N,r]=a.useState(""),[l,c]=a.useState(""),[v,w]=a.useState(""),M=!o,A=a.useMemo(()=>{const t=parseFloat(l),n=parseInt(v,10);return t>0&&n>0?Math.round(t/n/u):0},[l,v,u]),q=a.useMemo(()=>((1-u)*100).toFixed(1),[u]);if(a.useEffect(()=>{s&&(o?(y(o.name),p(o.price.toString()),x(o.stock.toString()),f(o.unit),b(o.category||"Feeds"),S(o.cost||""),r(o.imageUrl||""),c(""),w("")):(y(""),p(""),x(""),f("pcs"),b("Feeds"),S(""),r(""),c(""),w("")))},[o,s]),!s)return null;const Q=t=>{var I;const n=(I=t.target.files)==null?void 0:I[0];if(n){const U=new FileReader;U.onloadend=()=>{r(U.result)},U.readAsDataURL(n)}},B=t=>{if(t.preventDefault(),M){const n=parseInt(v,10);m&&h&&A>0&&n>0&&(j({name:m,price:A,stock:n,unit:h,category:k,cost:`Cost: ₱${parseFloat(l).toLocaleString()} / ${n} ${h}`,imageUrl:N}),i())}else{const n=parseFloat(C),I=parseInt(F,10);m&&h&&!isNaN(n)&&!isNaN(I)&&o&&(j({...o,name:m,price:Math.round(n),stock:I,unit:h,category:k,cost:P,imageUrl:N}),i())}},g="w-full px-3 py-2 bg-background border border-border rounded-md text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring",O=`${g} appearance-none`,d="block text-sm font-medium text-muted-foreground mb-1.5";return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center z-50 animate-fade-in p-4",children:e.jsxs("div",{className:"bg-card rounded-lg border border-border shadow-xl w-full max-w-lg animate-slide-in-up max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border flex-shrink-0",children:[e.jsx("h2",{className:"text-xl font-bold text-card-foreground",children:M?"Add New Product":"Edit Product"}),e.jsx("button",{onClick:i,className:"text-muted-foreground hover:text-foreground",children:e.jsx(E,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:B,className:"p-6 space-y-4 overflow-y-auto",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:d,children:"Product Name"}),e.jsx("input",{type:"text",id:"name",value:m,onChange:t=>y(t.target.value),required:!0,placeholder:"e.g. Grower Pellets",className:g})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:d,children:"Category"}),e.jsxs("select",{id:"category",value:k,onChange:t=>b(t.target.value),className:O,children:[e.jsx("option",{value:"Feeds",children:"Feeds"}),e.jsx("option",{value:"Medicines",children:"Medicines"}),e.jsx("option",{value:"Supplies",children:"Supplies"}),e.jsx("option",{value:"Equipment",children:"Equipment"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"unit",className:d,children:"Unit"}),e.jsxs("select",{id:"unit",value:h,onChange:t=>f(t.target.value),className:O,children:[e.jsx("option",{value:"pcs",children:"Pieces"}),e.jsx("option",{value:"kg",children:"Kilograms"}),e.jsx("option",{value:"g",children:"Grams"}),e.jsx("option",{value:"l",children:"Liters"}),e.jsx("option",{value:"ml",children:"Milliliters"}),e.jsx("option",{value:"box",children:"Boxes"}),e.jsx("option",{value:"pack",children:"Packs"})]})]})]}),M?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"batchCost",className:d,children:"Batch Cost (₱)"}),e.jsx("input",{type:"number",id:"batchCost",value:l,onChange:t=>c(t.target.value),required:!0,placeholder:"0.00",className:g})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"batchQuantity",className:d,children:"Batch Quantity"}),e.jsx("input",{type:"number",id:"batchQuantity",value:v,onChange:t=>w(t.target.value),required:!0,placeholder:"0",className:g})]})]}),A>0&&e.jsx("div",{className:"p-3 bg-secondary rounded-md",children:e.jsxs("p",{className:"text-sm text-secondary-foreground",children:[e.jsx("span",{className:"font-semibold",children:"Calculated Price:"})," ₱",A.toLocaleString(),e.jsxs("span",{className:"text-xs ml-2",children:["(",q,"% profit margin)"]})]})})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"price",className:d,children:"Price (₱)"}),e.jsx("input",{type:"number",id:"price",value:C,onChange:t=>p(t.target.value),required:!0,placeholder:"0.00",className:g})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"stock",className:d,children:"Current Stock"}),e.jsx("input",{type:"number",id:"stock",value:F,onChange:t=>x(t.target.value),required:!0,placeholder:"0",className:g})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cost",className:d,children:"Cost Information (Optional)"}),e.jsx("input",{type:"text",id:"cost",value:P,onChange:t=>S(t.target.value),placeholder:"e.g. Cost: ₱1,000 / 50 kg",className:g})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"image",className:d,children:"Product Image (Optional)"}),e.jsx("input",{type:"file",id:"image",accept:"image/*",onChange:Q,className:g}),N&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:N,alt:"Product",className:"w-20 h-20 object-cover rounded-md border border-border"})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-primary text-primary-foreground py-2 px-4 rounded-md font-semibold hover:bg-primary/90 transition-colors",children:M?"Add Product":"Update Product"}),e.jsx("button",{type:"button",onClick:i,className:"flex-1 bg-secondary text-secondary-foreground py-2 px-4 rounded-md font-semibold hover:bg-secondary/80 transition-colors",children:"Cancel"})]})]})]})})}),D=L.memo(({item:s,onEdit:i,onDelete:j})=>{const o=s.stock<=5?"low":s.stock<=20?"medium":"good",u=o==="low"?"text-destructive":o==="medium"?"text-warning":"text-success";return e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-foreground truncate",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.category})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[e.jsx("button",{onClick:()=>i(s),className:"text-muted-foreground hover:text-foreground p-1",children:e.jsx(G,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>j(s.id),className:"text-muted-foreground hover:text-destructive p-1",children:e.jsx(z,{className:"w-4 h-4"})})]})]}),s.imageUrl&&e.jsx("div",{className:"mb-3",children:e.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-full h-32 object-cover rounded-md"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Price:"}),e.jsxs("span",{className:"font-bold text-foreground",children:["₱",s.price.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Stock:"}),e.jsxs("span",{className:`font-bold ${u}`,children:[s.stock," ",s.unit]})]}),s.cost&&e.jsx("div",{className:"text-xs text-muted-foreground border-t border-border pt-2",children:s.cost})]})]})}),W=L.memo(({inventory:s,onSaveItem:i,onDeleteItem:j,profitMarginDivisor:o})=>{const[u,m]=a.useState(!1),[y,C]=a.useState(null),[p,F]=a.useState(""),[x,h]=a.useState("All"),f=r=>{C(r||null),m(!0)},k=()=>{m(!1),C(null)},b=a.useMemo(()=>{const r=s.filter(c=>{const v=c.name.toLowerCase().includes(p.toLowerCase()),w=x==="All"||c.category===x;return v&&w}),l={};return r.forEach(c=>{l[c.category]||(l[c.category]=[]),l[c.category].push(c)}),l},[s,p,x]),P=a.useMemo(()=>["All",...Array.from(new Set(s.map(l=>l.category)))].sort(),[s]),S=s.length,N=s.filter(r=>r.stock<=5).length;return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Inventory Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your products and stock levels"})]}),e.jsxs("button",{onClick:()=>f(),className:"bg-primary text-primary-foreground px-4 py-2 rounded-md font-semibold hover:bg-primary/90 transition-colors flex items-center gap-2",children:[e.jsx(R,{className:"w-5 h-5"}),"Add Product"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-card border border-border p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Products"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:S})]}),e.jsxs("div",{className:"bg-card border border-border p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Low Stock Items"}),e.jsx("p",{className:"text-2xl font-bold text-destructive",children:N})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx($,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:p,onChange:r=>F(r.target.value),className:"w-full pl-10 pr-4 py-2 bg-background border border-border rounded-md text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring"})]}),e.jsx("select",{value:x,onChange:r=>h(r.target.value),className:"px-4 py-2 bg-background border border-border rounded-md text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:P.map(r=>e.jsx("option",{value:r,children:r},r))})]}),Object.keys(b).length>0?e.jsx("div",{className:"space-y-6",children:Object.entries(b).map(([r,l])=>e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4",children:[r," (",l.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:l.map(c=>e.jsx(D,{item:c,onEdit:f,onDelete:j},c.id))})]},r))}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx("p",{className:"font-semibold",children:"No products found."}),e.jsx("p",{className:"text-sm",children:"Add some products to get started!"})]}),e.jsx(K,{isOpen:u,onClose:k,onSave:i,itemToEdit:y,profitMarginDivisor:o})]})});export{W as default};
