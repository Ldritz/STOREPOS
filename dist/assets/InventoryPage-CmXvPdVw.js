import{j as e,I as f,S as P,f as v,E as M,d as L}from"./index-B4bSIu3O.js";import{R as j,r as n}from"./charts-BYcMWlQw.js";import{C as E}from"./Card-CaqC1I2l.js";import"./vendor-CWc6w16D.js";const q=j.memo(({isOpen:t,onClose:x,onSave:m,item:s,profitMarginDivisor:g})=>{const[r,c]=n.useState({name:(s==null?void 0:s.name)||"",category:(s==null?void 0:s.category)||"",unit:(s==null?void 0:s.unit)||"",cost:(s==null?void 0:s.cost)||0,price:(s==null?void 0:s.price)||0,stock:(s==null?void 0:s.stock)||0,minStock:(s==null?void 0:s.minStock)||0}),h=n.useMemo(()=>r.cost?r.cost/g:0,[r.cost,g]),i=d=>{if(d.preventDefault(),r.name&&r.category&&r.unit&&r.cost!==void 0&&r.stock!==void 0&&r.minStock!==void 0){const u={...r,price:h,cost:r.cost,stock:r.stock,minStock:r.minStock};m(s?{...u,id:s.id}:u),x()}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"card-modern w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 pb-4 border-b border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10 text-primary",children:e.jsx(f,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:s?"Edit Item":"Add New Item"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s?"Update item details":"Add a new product to inventory"})]})]}),e.jsx("button",{onClick:x,className:"p-2 text-muted-foreground hover:text-foreground hover:bg-secondary rounded-lg transition-colors focus-ring",children:e.jsx(v,{className:"w-5 h-5 rotate-45"})})]}),e.jsxs("form",{onSubmit:i,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Name"}),e.jsx("input",{type:"text",value:r.name,onChange:d=>c({...r,name:d.target.value}),className:"w-full p-3 border border-border rounded-lg bg-background text-foreground focus-ring",placeholder:"Product name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Category"}),e.jsxs("select",{value:r.category,onChange:d=>c({...r,category:d.target.value}),className:"w-full p-3 border border-border rounded-lg bg-background text-foreground focus-ring",required:!0,children:[e.jsx("option",{value:"",children:"Select category"}),e.jsx("option",{value:"Fertilizers",children:"Fertilizers"}),e.jsx("option",{value:"Pesticides",children:"Pesticides"}),e.jsx("option",{value:"Seeds",children:"Seeds"}),e.jsx("option",{value:"Tools",children:"Tools"}),e.jsx("option",{value:"Equipment",children:"Equipment"}),e.jsx("option",{value:"Feed",children:"Feed"}),e.jsx("option",{value:"Medicine",children:"Medicine"}),e.jsx("option",{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Unit"}),e.jsxs("select",{value:r.unit,onChange:d=>c({...r,unit:d.target.value}),className:"w-full p-3 border border-border rounded-lg bg-background text-foreground focus-ring",required:!0,children:[e.jsx("option",{value:"",children:"Select unit"}),e.jsx("option",{value:"kg",children:"Kilogram (kg)"}),e.jsx("option",{value:"g",children:"Gram (g)"}),e.jsx("option",{value:"L",children:"Liter (L)"}),e.jsx("option",{value:"ml",children:"Milliliter (ml)"}),e.jsx("option",{value:"pcs",children:"Pieces (pcs)"}),e.jsx("option",{value:"box",children:"Box"}),e.jsx("option",{value:"pack",children:"Pack"}),e.jsx("option",{value:"bottle",children:"Bottle"}),e.jsx("option",{value:"bag",children:"Bag"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Cost Price"}),e.jsx("input",{type:"number",step:"0.01",value:r.cost,onChange:d=>c({...r,cost:parseFloat(d.target.value)||0}),className:"w-full p-3 border border-border rounded-lg bg-background text-foreground focus-ring",placeholder:"0.00",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Selling Price"}),e.jsx("input",{type:"number",step:"0.01",value:h.toFixed(2),className:"w-full p-3 border border-border rounded-lg bg-background text-foreground focus-ring",placeholder:"Auto-calculated",readOnly:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Current Stock"}),e.jsx("input",{type:"number",value:r.stock,onChange:d=>c({...r,stock:parseInt(d.target.value)||0}),className:"w-full p-3 border border-border rounded-lg bg-background text-foreground focus-ring",placeholder:"0",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Minimum Stock"}),e.jsx("input",{type:"number",value:r.minStock,onChange:d=>c({...r,minStock:parseInt(d.target.value)||0}),className:"w-full p-3 border border-border rounded-lg bg-background text-foreground focus-ring",placeholder:"0",required:!0})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-gradient-primary text-primary-foreground py-3 px-4 rounded-lg font-semibold hover:shadow-medium transition-all duration-200 btn-modern",children:s?"Update Item":"Add Item"}),e.jsx("button",{type:"button",onClick:x,className:"flex-1 bg-secondary text-secondary-foreground py-3 px-4 rounded-lg font-semibold hover:bg-secondary/80 transition-colors",children:"Cancel"})]})]})]})}):null}),A=j.memo(({item:t,onEdit:x,onDelete:m})=>{const s=t.stock<=t.minStock,g=t.stock/(t.minStock*2)*100;return e.jsx("div",{className:"card-modern hover:shadow-medium transition-all duration-300 group",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-1",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary/10 text-primary",children:t.category}),e.jsx("span",{className:"text-sm text-muted-foreground",children:t.unit})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>x(t),className:"p-2 text-muted-foreground hover:text-foreground hover:bg-secondary rounded-lg transition-colors focus-ring",title:"Edit item",children:e.jsx(M,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>m(t.id),className:"p-2 text-destructive hover:bg-destructive/10 rounded-lg transition-colors focus-ring",title:"Delete item",children:e.jsx(L,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Cost Price"}),e.jsx("p",{className:"text-lg font-bold text-foreground",children:t.cost.toLocaleString("en-PH",{style:"currency",currency:"PHP"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Selling Price"}),e.jsx("p",{className:"text-lg font-bold text-success",children:t.price.toLocaleString("en-PH",{style:"currency",currency:"PHP"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Stock Level"}),e.jsxs("p",{className:`text-sm font-bold ${s?"text-destructive":"text-success"}`,children:[t.stock," ",t.unit]})]}),e.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${s?"bg-destructive":"bg-success"}`,style:{width:`${Math.min(g,100)}%`}})}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Min: ",t.minStock," ",t.unit]})]}),s&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-destructive/10 rounded-lg border border-destructive/20",children:[e.jsx("div",{className:"w-2 h-2 bg-destructive rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-destructive",children:"Low stock alert"})]})]})]})})}),D=j.memo(({inventory:t,onSaveItem:x,onDeleteItem:m,profitMarginDivisor:s})=>{const[g,r]=n.useState(!1),[c,h]=n.useState(),[i,d]=n.useState(""),[u,N]=n.useState(""),y=n.useMemo(()=>t.reduce((o,a)=>o+a.price*a.stock,0),[t]),b=n.useMemo(()=>{let o=t;i&&(o=o.filter(l=>l.name.toLowerCase().includes(i.toLowerCase())||l.category.toLowerCase().includes(i.toLowerCase()))),u&&(o=o.filter(l=>l.category===u));const a=o.reduce((l,p)=>(l[p.category]||(l[p.category]=[]),l[p.category].push(p),l),{});return Object.entries(a).sort(([l],[p])=>l.localeCompare(p))},[t,i,u]),k=n.useMemo(()=>[...new Set(t.map(a=>a.category))].sort(),[t]),w=n.useMemo(()=>t.filter(o=>o.stock<=o.minStock),[t]),S=o=>{h(o),r(!0)},C=o=>{x(o),h(void 0),r(!1)},I=()=>{r(!1),h(void 0)};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"card-modern",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-primary/20 text-primary",children:e.jsx(f,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium uppercase tracking-wider",children:"Total Products"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:t.length})]})]})}),e.jsx("div",{className:"card-modern",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-success/20 text-success",children:e.jsx(f,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium uppercase tracking-wider",children:"Inventory Value"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:y.toLocaleString("en-PH",{style:"currency",currency:"PHP"})})]})]})}),e.jsx("div",{className:"card-modern",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-destructive/20 text-destructive",children:e.jsx(f,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium uppercase tracking-wider",children:"Low Stock Items"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:w.length})]})]})})]}),e.jsx(E,{title:"Inventory Management",subtitle:`${t.length} products in stock`,icon:e.jsx(f,{className:"w-5 h-5"}),actions:e.jsxs("button",{onClick:()=>r(!0),className:"bg-gradient-primary text-primary-foreground px-4 py-2 rounded-lg font-semibold hover:shadow-medium transition-all duration-200 btn-modern flex items-center gap-2",children:[e.jsx(v,{className:"w-4 h-4"}),"Add Item"]}),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:i,onChange:o=>d(o.target.value),className:"w-full pl-10 pr-4 py-3 border border-border rounded-lg bg-background text-foreground focus-ring"})]}),e.jsxs("select",{value:u,onChange:o=>N(o.target.value),className:"px-4 py-3 border border-border rounded-lg bg-background text-foreground focus-ring",children:[e.jsx("option",{value:"",children:"All Categories"}),k.map(o=>e.jsx("option",{value:o,children:o},o))]})]}),b.length>0?e.jsx("div",{className:"space-y-6",children:b.map(([o,a])=>e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-primary rounded-full"}),o," (",a.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(l=>e.jsx(A,{item:l,onEdit:S,onDelete:m},l.id))})]},o))}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(f,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("p",{className:"font-semibold text-foreground",children:"No items found"}),e.jsx("p",{className:"text-sm",children:i||u?"Try adjusting your search or filter criteria":"Add your first product to get started!"})]})]})}),e.jsx(q,{isOpen:g,onClose:I,onSave:C,item:c,profitMarginDivisor:s})]})});export{D as default};
