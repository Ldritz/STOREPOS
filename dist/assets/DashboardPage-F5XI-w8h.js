import{T as N,j as e,a as b,b as I,W as M,P as R}from"./index-CPSIuB5X.js";import{R as d,r as C,a as W,B as Y,C as H,X,Y as $,T as B,L as K,b as w}from"./charts-BYcMWlQw.js";import{C as p}from"./Card-CWfG7aAM.js";import"./vendor-CWc6w16D.js";const z=d.memo(({data:o})=>{const n=t=>`₱${t.toLocaleString()}`;return e.jsx("div",{className:"w-full h-72 md:h-80",children:e.jsx(W,{children:e.jsxs(Y,{data:o,margin:{top:20,right:20,left:0,bottom:5},children:[e.jsx(H,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),e.jsx(X,{dataKey:"name",stroke:"hsl(var(--muted-foreground))",fontSize:12}),e.jsx($,{stroke:"hsl(var(--muted-foreground))",fontSize:12,tickFormatter:n}),e.jsx(B,{cursor:{fill:"hsl(var(--accent))"},contentStyle:{backgroundColor:"hsl(var(--popover))",borderColor:"hsl(var(--border))",borderRadius:"0.5rem",color:"hsl(var(--popover-foreground))"},labelStyle:{fontWeight:"bold"}}),e.jsx(K,{wrapperStyle:{color:"hsl(var(--foreground))"}}),e.jsx(w,{dataKey:"income",fill:"hsl(var(--success))",name:"Income",radius:[4,4,0,0]}),e.jsx(w,{dataKey:"expense",fill:"hsl(var(--warning))",name:"Expense",radius:[4,4,0,0]})]})})})}),S=d.memo(({title:o,amount:n,Icon:t,iconClass:r})=>e.jsxs("div",{className:"bg-card border border-border p-4 rounded-lg flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:o}),e.jsx("p",{className:"text-2xl lg:text-3xl font-bold text-foreground mt-1",children:n.toLocaleString("en-PH",{style:"currency",currency:"PHP"})})]}),e.jsx("div",{className:`p-3 rounded-md ${r}`,children:e.jsx(t,{className:"w-8 h-8"})})]})),q=d.memo(({inventory:o,onNavigate:n})=>{const t=C.useMemo(()=>o.filter(r=>r.stock<=5),[o]);return e.jsx(p,{title:"Low Stock Alerts",actions:e.jsx("button",{onClick:()=>n(R.Inventory),className:"text-sm text-primary font-semibold hover:underline",children:"Manage →"}),children:t.length>0?e.jsx("div",{className:"h-72 overflow-y-auto pr-2",children:e.jsx("ul",{className:"space-y-2",children:t.slice(0,5).map(r=>e.jsxs("li",{className:"flex justify-between items-center text-sm p-3 bg-secondary rounded-md",children:[e.jsx("span",{className:"text-secondary-foreground",children:r.name}),e.jsxs("span",{className:"font-bold text-destructive",children:[r.stock," ",r.unit," left"]})]},r.id))})}):e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx("p",{className:"font-semibold",children:"No low stock items."}),e.jsx("p",{className:"text-sm",children:"Well done!"})]})})}),F=d.memo(({data:o})=>{const n=t=>`₱${t.toLocaleString()}`;return e.jsx(p,{title:"Top Products by Revenue",children:o.length>0?e.jsx("div",{className:"space-y-3",children:o.map((t,r)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-secondary rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-primary text-primary-foreground text-xs font-bold flex items-center justify-center",children:r+1}),e.jsx("span",{className:"font-medium text-foreground",children:t.name})]}),e.jsx("span",{className:"font-bold text-success",children:n(t.revenue)})]},t.name))}):e.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[e.jsx("p",{className:"font-semibold",children:"No product data available."}),e.jsx("p",{className:"text-sm",children:"Add some sales to see top products!"})]})})}),f=d.memo(({title:o,amount:n,Icon:t,iconClass:r})=>e.jsx("div",{className:"bg-card border border-border p-4 rounded-lg flex justify-between items-center",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-md ${r}`,children:e.jsx(t,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:o}),e.jsx("p",{className:"text-xl font-bold text-foreground",children:n.toLocaleString("en-PH",{style:"currency",currency:"PHP"})})]})]})})),Z=d.memo(({transactions:o,inventory:n,onNavigate:t})=>{const{todaysIncome:r,todaysExpenses:E,totalIncome:T,totalExpenses:P,netIncome:D,chartData:g,topProductsData:k}=C.useMemo(()=>{const L=new Date().toISOString().split("T")[0];let j=0,y=0,u=0,h=0;const a={},i={};o.forEach(s=>{const c=s.date.startsWith(L);s.type===N.Income?(u+=s.amount,c&&(j+=s.amount),s.items&&s.items.forEach(v=>{const l=n.find(x=>x.id===v.inventoryItemId);if(l){const x=l.price*v.quantity;i[l.id]?i[l.id].revenue+=x:i[l.id]={name:l.name,revenue:x}}})):(h+=s.amount,c&&(y+=s.amount));const m=new Date(s.date).toLocaleString("default",{month:"short",year:"numeric"});a[m]||(a[m]={income:0,expense:0}),s.type===N.Income?a[m].income+=s.amount:a[m].expense+=s.amount});const A=Object.keys(a).sort((s,c)=>new Date(s).getTime()-new Date(c).getTime()).slice(-6).map(s=>({name:new Date(s).toLocaleString("default",{month:"short"}),...a[s]})),O=Object.values(i).sort((s,c)=>c.revenue-s.revenue).slice(0,5).reverse();return{todaysIncome:j,todaysExpenses:y,totalIncome:u,totalExpenses:h,netIncome:u-h,chartData:A,topProductsData:O}},[o,n]);return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(S,{title:"TODAY'S INCOME",amount:r,Icon:b,iconClass:"bg-success text-success-foreground"}),e.jsx(S,{title:"TODAY'S EXPENSES",amount:E,Icon:I,iconClass:"bg-warning text-warning-foreground"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start",children:[e.jsx(q,{inventory:n,onNavigate:t}),e.jsx(F,{data:k})]}),e.jsx(p,{title:"Monthly Performance",children:g.length>0?e.jsx(z,{data:g}):e.jsxs("div",{className:"h-full flex flex-col justify-center items-center text-center py-10 text-muted-foreground",children:[e.jsx("p",{className:"font-semibold",children:"No transaction data for chart."}),e.jsx("p",{className:"text-sm",children:"Add some transactions to get started!"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(f,{title:"TOTAL INCOME",amount:T,Icon:b,iconClass:"bg-success text-success-foreground"}),e.jsx(f,{title:"TOTAL EXPENSES",amount:P,Icon:I,iconClass:"bg-warning text-warning-foreground"}),e.jsx(f,{title:"NET INCOME",amount:D,Icon:M,iconClass:"bg-info text-info-foreground"})]})]})});export{Z as default};
