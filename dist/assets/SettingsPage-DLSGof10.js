import{j as e,g as F,M as $,h as A,U as O,D as T}from"./index-B4bSIu3O.js";import{r as i}from"./charts-BYcMWlQw.js";import{C as c}from"./Card-CaqC1I2l.js";import"./vendor-CWc6w16D.js";const J=({settings:s,onSaveSettings:f,transactions:h,inventory:w,theme:g,setTheme:b})=>{const[j,v]=i.useState(s.storeName),[l,m]=i.useState(s.storeLogo),[d,N]=i.useState(s.profitMarginDivisor.toString()),y=i.useRef(null);i.useEffect(()=>{v(s.storeName),m(s.storeLogo),N(s.profitMarginDivisor.toString())},[s]);const k=()=>{f({storeName:j,storeLogo:l}),alert("Store information saved!")},I=()=>{const r=parseFloat(d);!isNaN(r)&&r>0&&r<1?(f({profitMarginDivisor:r}),alert("Profit margin saved!")):alert("Please enter a valid profit margin divisor (a number between 0 and 1).")},L=r=>{var o;const x=(o=r.target.files)==null?void 0:o[0];if(x){const a=new FileReader;a.onloadend=()=>{m(a.result)},a.readAsDataURL(x)}},M=()=>{var C;if(h.length===0){alert("No transactions to export.");return}const r=new Map(w.map(t=>[t.id,t.name])),o=[["ID","Date","Type","Description","Amount","Items Sold"].join(",")];for(const t of h){const U=((C=t.items)==null?void 0:C.map(D=>`${r.get(D.inventoryItemId)||"Unknown Item"} (x${D.quantity})`).join("; "))||"",E=[t.id,t.date,t.type,`"${t.description.replace(/"/g,'""')}"`,t.amount,`"${U}"`];o.push(E.join(","))}const a=o.join(`
`),P=new Blob([a],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),S=URL.createObjectURL(P);n.setAttribute("href",S),n.setAttribute("download",`olesco-export-${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(S)},R=()=>{const r=parseFloat(d);return!isNaN(r)&&r>0&&r<1?`~${((1-r)*100).toFixed(1)}% profit`:"Invalid divisor"},u="w-full px-3 py-2 bg-background border border-input rounded-md text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring",p="block text-sm font-medium text-muted-foreground mb-1.5";return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx(c,{title:"Appearance",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold text-card-foreground",children:"Theme"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select the theme for the application."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[e.jsxs("button",{onClick:()=>b("light"),className:`flex items-center justify-center p-4 rounded-md border-2 transition-colors ${g==="light"?"border-primary bg-primary/10":"border-border bg-secondary hover:border-primary/50"}`,children:[e.jsx(F,{className:"w-6 h-6 mr-2"})," Light"]}),e.jsxs("button",{onClick:()=>b("dark"),className:`flex items-center justify-center p-4 rounded-md border-2 transition-colors ${g==="dark"?"border-primary bg-primary/10":"border-border bg-secondary hover:border-primary/50"}`,children:[e.jsx($,{className:"w-6 h-6 mr-2"})," Dark"]})]})]})}),e.jsx(c,{title:"Store Information",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"storeName",className:p,children:"Store Name"}),e.jsx("input",{type:"text",id:"storeName",value:j,onChange:r=>v(r.target.value),className:u})]}),e.jsxs("div",{children:[e.jsx("label",{className:p,children:"Store Logo"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("div",{className:"w-24 h-24 flex-shrink-0 bg-secondary rounded-md flex items-center justify-center border border-border",children:l?e.jsx("img",{src:l,alt:"Logo Preview",className:"w-full h-full object-cover rounded-md"}):e.jsx(A,{className:"w-10 h-10 text-muted-foreground"})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("input",{type:"text",value:l,onChange:r=>m(r.target.value),placeholder:"Paste image URL here",className:u}),e.jsx("div",{className:"text-center text-muted-foreground text-sm",children:"OR"}),e.jsx("input",{type:"file",ref:y,onChange:L,accept:"image/*",className:"hidden"}),e.jsxs("button",{type:"button",onClick:()=>{var r;return(r=y.current)==null?void 0:r.click()},className:"w-full flex items-center justify-center gap-2 py-2 px-4 bg-secondary border border-border rounded-md hover:bg-muted transition-colors",children:[e.jsx(O,{className:"w-5 h-5"}),e.jsx("span",{children:"Upload File"})]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:k,className:"bg-primary text-primary-foreground font-bold py-2 px-6 rounded-lg hover:bg-primary/90 transition-colors",children:"Save Changes"})})]})}),e.jsx(c,{title:"Pricing Settings",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"profitDivisor",className:p,children:"Profit Margin Divisor"}),e.jsx("input",{type:"number",id:"profitDivisor",value:d,onChange:r=>N(r.target.value),step:"0.01",min:"0.01",max:"0.99",className:u}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Current: ",s.profitMarginDivisor]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["This value is used to calculate selling price (`Cost / Divisor`). A divisor of ",d||"..."," results in a ",R(),"."]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:I,className:"bg-secondary text-secondary-foreground font-bold py-2 px-6 rounded-lg hover:bg-muted transition-colors border border-border",children:"Save Margin"})})]})}),e.jsx(c,{title:"Data Management",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold text-card-foreground",children:"Export Data"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Export all sales and expenses to a CSV file."}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsxs("button",{onClick:M,className:"flex items-center gap-2 bg-secondary text-secondary-foreground font-bold py-2 px-4 rounded-lg hover:bg-muted transition-colors border border-border",children:[e.jsx(T,{className:"w-5 h-5"}),e.jsx("span",{children:"Export All Data"})]})})]})})]})};export{J as default};
